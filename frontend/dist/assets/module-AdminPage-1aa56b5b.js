import{c as Mt,r as E,e as le,j as o,o as Fe,h as je,R as ne}from"./module-theme-62f9b590.js";import{u as zt,a as _t,b as qt,c as Ht,S as ee,d as Wt,H as z,T as Gt,e as $t,f as Kt,g as Xt,h as Zt,i as Jt,p as Qt,j as De,B as We,k as ae,M as Yt,l as L,m as es,O as ts,L as at,n as ss,F as lt,C as rs,o as is,q as ns,G as bt,r as as,s as ls}from"./module-ServicePolicyRow-b0c3167a.js";import{c as W,f as fe,b as St,d as jt}from"./module-chunk-DKFDJSXF-50f12901.js";import{S as wt,A as ct,a as ot}from"./AdminPage.js";var[Ws,cs]=Mt({strict:!1,name:"ButtonGroupContext"});function os(e){const[r,i]=E.useState(!e);return{ref:E.useCallback(l=>{l&&i(l.tagName==="BUTTON")},[]),type:r?"button":void 0}}function Be(e){const{children:r,className:i,...t}=e,n=E.isValidElement(r)?E.cloneElement(r,{"aria-hidden":!0,focusable:!1}):r,l=le("chakra-button__icon",i);return o.jsx(W.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...t,className:l,children:n})}Be.displayName="ButtonIcon";function Me(e){const{label:r,placement:i,spacing:t="0.5rem",children:n=o.jsx(wt,{color:"currentColor",width:"1em",height:"1em"}),className:l,__css:d,...v}=e,m=le("chakra-button__spinner",l),j=i==="start"?"marginEnd":"marginStart",C=E.useMemo(()=>({display:"flex",alignItems:"center",position:r?"relative":"absolute",[j]:r?t:0,fontSize:"1em",lineHeight:"normal",...d}),[d,r,j,t]);return o.jsx(W.div,{className:m,...v,__css:C,children:n})}Me.displayName="ButtonSpinner";var pe=fe((e,r)=>{const i=cs(),t=St("Button",{...i,...e}),{isDisabled:n=i==null?void 0:i.isDisabled,isLoading:l,isActive:d,children:v,leftIcon:m,rightIcon:j,loadingText:C,iconSpacing:b="0.5rem",type:x,spinner:U,spinnerPlacement:N="start",className:he,as:te,...ye}=Fe(e),p=E.useMemo(()=>{const se={...t==null?void 0:t._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...t,...!!i&&{_focus:se}}},[t,i]),{ref:R,type:q}=os(te),A={rightIcon:j,leftIcon:m,iconSpacing:b,children:v};return o.jsxs(W.button,{ref:zt(r,R),as:te,type:x??q,"data-active":je(d),"data-loading":je(l),__css:p,className:le("chakra-button",he),...ye,disabled:n||l,children:[l&&N==="start"&&o.jsx(Me,{className:"chakra-button__spinner--start",label:C,placement:"start",spacing:b,children:U}),l?C||o.jsx(W.span,{opacity:0,children:o.jsx(ut,{...A})}):o.jsx(ut,{...A}),l&&N==="end"&&o.jsx(Me,{className:"chakra-button__spinner--end",label:C,placement:"end",spacing:b,children:U})]})});pe.displayName="Button";function ut(e){const{leftIcon:r,rightIcon:i,children:t,iconSpacing:n}=e;return o.jsxs(o.Fragment,{children:[r&&o.jsx(Be,{marginEnd:n,children:r}),t,i&&o.jsx(Be,{marginStart:n,children:i})]})}var ze=fe(function(r,i){var t;const n=St("FormLabel",r),l=Fe(r),{className:d,children:v,requiredIndicator:m=o.jsx(kt,{}),optionalIndicator:j=null,...C}=l,b=_t(),x=(t=b==null?void 0:b.getLabelProps(C,i))!=null?t:{ref:i,...C};return o.jsxs(W.label,{...x,className:le("chakra-form__label",l.className),__css:{display:"block",textAlign:"start",...n},children:[v,b!=null&&b.isRequired?m:j]})});ze.displayName="FormLabel";var kt=fe(function(r,i){const t=_t(),n=qt();if(!(t!=null&&t.isRequired))return null;const l=le("chakra-form__required-indicator",r.className);return o.jsx(W.span,{...t==null?void 0:t.getRequiredIndicatorProps(r,i),__css:n.requiredIndicator,className:l})});kt.displayName="RequiredIndicator";var Ge=fe(function(r,i){const{htmlSize:t,...n}=r,l=jt("Input",n),d=Fe(n),v=Ht(d),m=le("chakra-input",r.className);return o.jsx(W.input,{size:t,...v,__css:l.field,ref:i,className:m})});Ge.displayName="Input";Ge.id="Input";var qe=fe((e,r)=>o.jsx(ee,{align:"center",...e,direction:"column",ref:r}));qe.displayName="VStack";var At=fe(function(r,i){const t=jt("Switch",r),{spacing:n="0.5rem",children:l,...d}=Fe(r),{state:v,getInputProps:m,getCheckboxProps:j,getRootProps:C,getLabelProps:b}=Wt(d),x=E.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...t.container}),[t.container]),U=E.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...t.track}),[t.track]),N=E.useMemo(()=>({userSelect:"none",marginStart:n,...t.label}),[n,t.label]);return o.jsxs(W.label,{...C(),className:le("chakra-switch",r.className),__css:x,children:[o.jsx("input",{className:"chakra-switch__input",...m({},i)}),o.jsx(W.span,{...j(),className:"chakra-switch__track",__css:U,children:o.jsx(W.span,{__css:t.thumb,className:"chakra-switch__thumb","data-checked":je(v.isChecked),"data-hover":je(v.isHovered)})}),l&&o.jsx(W.span,{className:"chakra-switch__label",...b(),__css:N,children:l})]})});At.displayName="Switch";const us=e=>{const r=t=>{Qt({service_official_policies_uids:t},De).then(()=>{e.setSelectedServiceOfficialPoliciesUids(t)}).catch(l=>{console.log(l)})},i=t=>{const n=t.target.value;if(e.selectedServiceOfficialPoliciesUids.includes(n)){const l=e.selectedServiceOfficialPoliciesUids.filter(d=>d!==n);r(l)}else{const l=[...e.selectedServiceOfficialPoliciesUids,n];r(l)}};return o.jsxs(ee,{spacing:4,children:[o.jsx(z,{as:"h3",size:"lg",children:"利用サービスを選択"}),o.jsxs(Gt,{display:["block","table","table"],children:[o.jsx($t,{display:["block","table-header-group","table-header-group"],children:o.jsx(Kt,{useCheckbox:!0})}),o.jsx(Xt,{display:["block","table-row-group","table-row-group"],children:Object.values(Zt).map(t=>o.jsx(Jt,{...t,useCheckbox:!0,selectedServiceOfficialPoliciesUids:e.selectedServiceOfficialPoliciesUids,handleChangeServiceOfficialPolicyUids:i},t.uid))})]})]})},ds=()=>o.jsx(We,{children:o.jsxs(ee,{justifyContent:"left",spacing:8,children:[o.jsxs(ee,{spacing:4,children:[o.jsxs(ae,{children:[o.jsx(z,{as:"h1",m:0,children:o.jsx(Yt,{color:"red"})}),o.jsx(z,{as:"h1",m:0,children:"APIエンドポイントにアクセスできません"})]}),o.jsx(L,{m:0,children:"パーマリンク設定が基本に設定されているため、APIエンドポイントが無効化されています。"})]}),o.jsxs(ee,{spacing:4,children:[o.jsxs(ae,{children:[o.jsx(z,{as:"h1",m:0,children:o.jsx(es,{color:"green"})}),o.jsx(z,{as:"h1",m:0,children:"解決策"})]}),o.jsxs(ts,{children:[o.jsx(at,{children:o.jsx(L,{m:0,children:"管理画面の「設定」の中にある「パーマリンク」を開いてください。"})}),o.jsx(at,{children:o.jsx(L,{m:0,children:"パーマリンク設定を「基本」以外に設定してください。"})})]})]})]})});var _e=e=>e.type==="checkbox",ue=e=>e instanceof Date,T=e=>e==null;const Vt=e=>typeof e=="object";var O=e=>!T(e)&&!Array.isArray(e)&&Vt(e)&&!ue(e),fs=e=>O(e)&&e.target?_e(e.target)?e.target.checked:e.target.value:e,hs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ys=(e,r)=>e.has(hs(r)),gs=e=>{const r=e.constructor&&e.constructor.prototype;return O(r)&&r.hasOwnProperty("isPrototypeOf")},$e=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function J(e){let r;const i=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!($e&&(e instanceof Blob||e instanceof FileList))&&(i||O(e)))if(r=i?[]:{},!i&&!gs(e))r=e;else for(const t in e)e.hasOwnProperty(t)&&(r[t]=J(e[t]));else return e;return r}var be=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,h=(e,r,i)=>{if(!r||!O(e))return i;const t=be(r.split(/[,[\].]+?/)).reduce((n,l)=>T(n)?n:n[l],e);return D(t)||t===e?D(e[r])?i:e[r]:t};const dt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ne.createContext(null);var ms=(e,r,i,t=!0)=>{const n={defaultValues:r._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const d=l;return r._proxyFormState[d]!==H.all&&(r._proxyFormState[d]=!t||H.all),i&&(i[d]=!0),e[d]}});return n},M=e=>O(e)&&!Object.keys(e).length,xs=(e,r,i,t)=>{i(e);const{name:n,...l}=e;return M(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(d=>r[d]===(!t||H.all))},Le=e=>Array.isArray(e)?e:[e];function vs(e){const r=ne.useRef(e);r.current=e,ne.useEffect(()=>{const i=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{i&&i.unsubscribe()}},[e.disabled])}var K=e=>typeof e=="string",ps=(e,r,i,t,n)=>K(e)?(t&&r.watch.add(e),h(i,e,n)):Array.isArray(e)?e.map(l=>(t&&r.watch.add(l),h(i,l))):(t&&(r.watchAll=!0),i),Ke=e=>/^\w*$/.test(e),Ft=e=>be(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,r,i){let t=-1;const n=Ke(r)?[r]:Ft(r),l=n.length,d=l-1;for(;++t<l;){const v=n[t];let m=i;if(t!==d){const j=e[v];m=O(j)||Array.isArray(j)?j:isNaN(+n[t+1])?{}:[]}e[v]=m,e=e[v]}return e}var _s=(e,r,i,t,n)=>r?{...i[e],types:{...i[e]&&i[e].types?i[e].types:{},[t]:n||!0}}:{};const He=(e,r,i)=>{for(const t of i||Object.keys(e)){const n=h(e,t);if(n){const{_f:l,...d}=n;if(l&&r(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else O(d)&&He(d,r)}}};var ft=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched}),ht=(e,r,i)=>!i&&(r.watchAll||r.watch.has(e)||[...r.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),bs=(e,r,i)=>{const t=be(h(e,i));return w(t,"root",r[i]),w(e,i,t),e},de=e=>typeof e=="boolean",Xe=e=>e.type==="file",Q=e=>typeof e=="function",we=e=>{if(!$e)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Se=e=>K(e),Ze=e=>e.type==="radio",ke=e=>e instanceof RegExp;const yt={value:!1,isValid:!1},gt={value:!0,isValid:!0};var Dt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?gt:{value:e[0].value,isValid:!0}:gt:yt}return yt};const mt={isValid:!1,value:null};var Ct=e=>Array.isArray(e)?e.reduce((r,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:r,mt):mt;function xt(e,r,i="validate"){if(Se(e)||Array.isArray(e)&&e.every(Se)||de(e)&&!e)return{type:i,message:Se(e)?e:"",ref:r}}var oe=e=>O(e)&&!ke(e)?e:{value:e,message:""},vt=async(e,r,i,t,n)=>{const{ref:l,refs:d,required:v,maxLength:m,minLength:j,min:C,max:b,pattern:x,validate:U,name:N,valueAsNumber:he,mount:te,disabled:ye}=e._f,p=h(r,N);if(!te||ye)return{};const R=d?d[0]:l,q=S=>{t&&R.reportValidity&&(R.setCustomValidity(de(S)?"":S||""),R.reportValidity())},A={},se=Ze(l),ge=_e(l),Ce=se||ge,G=(he||Xe(l))&&D(l.value)&&D(p)||we(l)&&l.value===""||p===""||Array.isArray(p)&&!p.length,re=_s.bind(null,N,i,A),X=(S,_,V,I=Z.maxLength,B=Z.minLength)=>{const $=S?_:V;A[N]={type:S?I:B,message:$,ref:l,...re(S?I:B,$)}};if(n?!Array.isArray(p)||!p.length:v&&(!Ce&&(G||T(p))||de(p)&&!p||ge&&!Dt(d).isValid||se&&!Ct(d).isValid)){const{value:S,message:_}=Se(v)?{value:!!v,message:v}:oe(v);if(S&&(A[N]={type:Z.required,message:_,ref:R,...re(Z.required,_)},!i))return q(_),A}if(!G&&(!T(C)||!T(b))){let S,_;const V=oe(b),I=oe(C);if(!T(p)&&!isNaN(p)){const B=l.valueAsNumber||p&&+p;T(V.value)||(S=B>V.value),T(I.value)||(_=B<I.value)}else{const B=l.valueAsDate||new Date(p),$=xe=>new Date(new Date().toDateString()+" "+xe),ie=l.type=="time",me=l.type=="week";K(V.value)&&p&&(S=ie?$(p)>$(V.value):me?p>V.value:B>new Date(V.value)),K(I.value)&&p&&(_=ie?$(p)<$(I.value):me?p<I.value:B<new Date(I.value))}if((S||_)&&(X(!!S,V.message,I.message,Z.max,Z.min),!i))return q(A[N].message),A}if((m||j)&&!G&&(K(p)||n&&Array.isArray(p))){const S=oe(m),_=oe(j),V=!T(S.value)&&p.length>+S.value,I=!T(_.value)&&p.length<+_.value;if((V||I)&&(X(V,S.message,_.message),!i))return q(A[N].message),A}if(x&&!G&&K(p)){const{value:S,message:_}=oe(x);if(ke(S)&&!p.match(S)&&(A[N]={type:Z.pattern,message:_,ref:l,...re(Z.pattern,_)},!i))return q(_),A}if(U){if(Q(U)){const S=await U(p,r),_=xt(S,R);if(_&&(A[N]={..._,...re(Z.validate,_.message)},!i))return q(_.message),A}else if(O(U)){let S={};for(const _ in U){if(!M(S)&&!i)break;const V=xt(await U[_](p,r),R,_);V&&(S={...V,...re(_,V.message)},q(V.message),i&&(A[N]=S))}if(!M(S)&&(A[N]={ref:R,...S},!i))return A}}return q(!0),A};function Ss(e,r){const i=r.slice(0,-1).length;let t=0;for(;t<i;)e=D(e)?t++:e[r[t++]];return e}function js(e){for(const r in e)if(e.hasOwnProperty(r)&&!D(e[r]))return!1;return!0}function P(e,r){const i=Array.isArray(r)?r:Ke(r)?[r]:Ft(r),t=i.length===1?e:Ss(e,i),n=i.length-1,l=i[n];return t&&delete t[l],n!==0&&(O(t)&&M(t)||Array.isArray(t)&&js(t))&&P(e,i.slice(0,-1)),e}function Te(){let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}}var Ae=e=>T(e)||!Vt(e);function Y(e,r){if(Ae(e)||Ae(r))return e===r;if(ue(e)&&ue(r))return e.getTime()===r.getTime();const i=Object.keys(e),t=Object.keys(r);if(i.length!==t.length)return!1;for(const n of i){const l=e[n];if(!t.includes(n))return!1;if(n!=="ref"){const d=r[n];if(ue(l)&&ue(d)||O(l)&&O(d)||Array.isArray(l)&&Array.isArray(d)?!Y(l,d):l!==d)return!1}}return!0}var Ot=e=>e.type==="select-multiple",ws=e=>Ze(e)||_e(e),Ie=e=>we(e)&&e.isConnected,Et=e=>{for(const r in e)if(Q(e[r]))return!0;return!1};function Ve(e,r={}){const i=Array.isArray(e);if(O(e)||i)for(const t in e)Array.isArray(e[t])||O(e[t])&&!Et(e[t])?(r[t]=Array.isArray(e[t])?[]:{},Ve(e[t],r[t])):T(e[t])||(r[t]=!0);return r}function Nt(e,r,i){const t=Array.isArray(e);if(O(e)||t)for(const n in e)Array.isArray(e[n])||O(e[n])&&!Et(e[n])?D(r)||Ae(i[n])?i[n]=Array.isArray(e[n])?Ve(e[n],[]):{...Ve(e[n])}:Nt(e[n],T(r)?{}:r[n],i[n]):i[n]=!Y(e[n],r[n]);return i}var Ue=(e,r)=>Nt(e,r,Ve(r)),Pt=(e,{valueAsNumber:r,valueAsDate:i,setValueAs:t})=>D(e)?e:r?e===""?NaN:e&&+e:i&&K(e)?new Date(e):t?t(e):e;function Re(e){const r=e.ref;if(!(e.refs?e.refs.every(i=>i.disabled):r.disabled))return Xe(r)?r.files:Ze(r)?Ct(e.refs).value:Ot(r)?[...r.selectedOptions].map(({value:i})=>i):_e(r)?Dt(e.refs).value:Pt(D(r.value)?e.ref.value:r.value,e)}var ks=(e,r,i,t)=>{const n={};for(const l of e){const d=h(r,l);d&&w(n,l,d._f)}return{criteriaMode:i,names:[...e],fields:n,shouldUseNativeValidation:t}},ve=e=>D(e)?e:ke(e)?e.source:O(e)?ke(e.value)?e.value.source:e.value:e,As=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function pt(e,r,i){const t=h(e,i);if(t||Ke(i))return{error:t,name:i};const n=i.split(".");for(;n.length;){const l=n.join("."),d=h(r,l),v=h(e,l);if(d&&!Array.isArray(d)&&i!==l)return{name:i};if(v&&v.type)return{name:l,error:v};n.pop()}return{name:i}}var Vs=(e,r,i,t,n)=>n.isOnAll?!1:!i&&n.isOnTouch?!(r||e):(i?t.isOnBlur:n.isOnBlur)?!e:(i?t.isOnChange:n.isOnChange)?e:!0,Fs=(e,r)=>!be(h(e,r)).length&&P(e,r);const Ds={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function Cs(e={},r){let i={...Ds,...e},t={submitCount:0,isDirty:!1,isLoading:Q(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},n={},l=O(i.defaultValues)||O(i.values)?J(i.defaultValues||i.values)||{}:{},d=i.shouldUnregister?{}:J(l),v={action:!1,mount:!1,watch:!1},m={mount:new Set,unMount:new Set,array:new Set,watch:new Set},j,C=0;const b={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Te(),array:Te(),state:Te()},U=e.resetOptions&&e.resetOptions.keepDirtyValues,N=ft(i.mode),he=ft(i.reValidateMode),te=i.criteriaMode===H.all,ye=s=>a=>{clearTimeout(C),C=setTimeout(s,a)},p=async s=>{if(b.isValid||s){const a=i.resolver?M((await G()).errors):await X(n,!0);a!==t.isValid&&x.state.next({isValid:a})}},R=s=>b.isValidating&&x.state.next({isValidating:s}),q=(s,a=[],c,y,f=!0,u=!0)=>{if(y&&c){if(v.action=!0,u&&Array.isArray(h(n,s))){const g=c(h(n,s),y.argA,y.argB);f&&w(n,s,g)}if(u&&Array.isArray(h(t.errors,s))){const g=c(h(t.errors,s),y.argA,y.argB);f&&w(t.errors,s,g),Fs(t.errors,s)}if(b.touchedFields&&u&&Array.isArray(h(t.touchedFields,s))){const g=c(h(t.touchedFields,s),y.argA,y.argB);f&&w(t.touchedFields,s,g)}b.dirtyFields&&(t.dirtyFields=Ue(l,d)),x.state.next({name:s,isDirty:_(s,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(d,s,a)},A=(s,a)=>{w(t.errors,s,a),x.state.next({errors:t.errors})},se=(s,a,c,y)=>{const f=h(n,s);if(f){const u=h(d,s,D(c)?h(l,s):c);D(u)||y&&y.defaultChecked||a?w(d,s,a?u:Re(f._f)):B(s,u),v.mount&&p()}},ge=(s,a,c,y,f)=>{let u=!1,g=!1;const k={name:s};if(!c||y){b.isDirty&&(g=t.isDirty,t.isDirty=k.isDirty=_(),u=g!==k.isDirty);const F=Y(h(l,s),a);g=h(t.dirtyFields,s),F?P(t.dirtyFields,s):w(t.dirtyFields,s,!0),k.dirtyFields=t.dirtyFields,u=u||b.dirtyFields&&g!==!F}if(c){const F=h(t.touchedFields,s);F||(w(t.touchedFields,s,c),k.touchedFields=t.touchedFields,u=u||b.touchedFields&&F!==c)}return u&&f&&x.state.next(k),u?k:{}},Ce=(s,a,c,y)=>{const f=h(t.errors,s),u=b.isValid&&de(a)&&t.isValid!==a;if(e.delayError&&c?(j=ye(()=>A(s,c)),j(e.delayError)):(clearTimeout(C),j=null,c?w(t.errors,s,c):P(t.errors,s)),(c?!Y(f,c):f)||!M(y)||u){const g={...y,...u&&de(a)?{isValid:a}:{},errors:t.errors,name:s};t={...t,...g},x.state.next(g)}R(!1)},G=async s=>i.resolver(d,i.context,ks(s||m.mount,n,i.criteriaMode,i.shouldUseNativeValidation)),re=async s=>{const{errors:a}=await G();if(s)for(const c of s){const y=h(a,c);y?w(t.errors,c,y):P(t.errors,c)}else t.errors=a;return a},X=async(s,a,c={valid:!0})=>{for(const y in s){const f=s[y];if(f){const{_f:u,...g}=f;if(u){const k=m.array.has(u.name),F=await vt(f,d,te,i.shouldUseNativeValidation&&!a,k);if(F[u.name]&&(c.valid=!1,a))break;!a&&(h(F,u.name)?k?bs(t.errors,F,u.name):w(t.errors,u.name,F[u.name]):P(t.errors,u.name))}g&&await X(g,a,c)}}return c.valid},S=()=>{for(const s of m.unMount){const a=h(n,s);a&&(a._f.refs?a._f.refs.every(c=>!Ie(c)):!Ie(a._f.ref))&&Oe(s)}m.unMount=new Set},_=(s,a)=>(s&&a&&w(d,s,a),!Y(Je(),l)),V=(s,a,c)=>ps(s,m,{...v.mount?d:D(a)?l:K(s)?{[s]:a}:a},c,a),I=s=>be(h(v.mount?d:l,s,e.shouldUnregister?h(l,s,[]):[])),B=(s,a,c={})=>{const y=h(n,s);let f=a;if(y){const u=y._f;u&&(!u.disabled&&w(d,s,Pt(a,u)),f=we(u.ref)&&T(a)?"":a,Ot(u.ref)?[...u.ref.options].forEach(g=>g.selected=f.includes(g.value)):u.refs?_e(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(k=>k===g.value):f===g.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(g=>g.checked=g.value===f):Xe(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||x.values.next({name:s,values:{...d}})))}(c.shouldDirty||c.shouldTouch)&&ge(s,f,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&xe(s)},$=(s,a,c)=>{for(const y in a){const f=a[y],u=`${s}.${y}`,g=h(n,u);(m.array.has(s)||!Ae(f)||g&&!g._f)&&!ue(f)?$(u,f,c):B(u,f,c)}},ie=(s,a,c={})=>{const y=h(n,s),f=m.array.has(s),u=J(a);w(d,s,u),f?(x.array.next({name:s,values:{...d}}),(b.isDirty||b.dirtyFields)&&c.shouldDirty&&x.state.next({name:s,dirtyFields:Ue(l,d),isDirty:_(s,u)})):y&&!y._f&&!T(u)?$(s,u,c):B(s,u,c),ht(s,m)&&x.state.next({...t}),x.values.next({name:s,values:{...d}}),!v.mount&&r()},me=async s=>{const a=s.target;let c=a.name,y=!0;const f=h(n,c),u=()=>a.type?Re(f._f):fs(s);if(f){let g,k;const F=u(),ce=s.type===dt.BLUR||s.type===dt.FOCUS_OUT,Ut=!As(f._f)&&!i.resolver&&!h(t.errors,c)&&!f._f.deps||Vs(ce,h(t.touchedFields,c),t.isSubmitted,he,N),Ne=ht(c,m,ce);w(d,c,F),ce?(f._f.onBlur&&f._f.onBlur(s),j&&j(0)):f._f.onChange&&f._f.onChange(s);const Pe=ge(c,F,ce,!1),Rt=!M(Pe)||Ne;if(!ce&&x.values.next({name:c,type:s.type,values:{...d}}),Ut)return b.isValid&&p(),Rt&&x.state.next({name:c,...Ne?{}:Pe});if(!ce&&Ne&&x.state.next({...t}),R(!0),i.resolver){const{errors:it}=await G([c]),Bt=pt(t.errors,n,c),nt=pt(it,n,Bt.name||c);g=nt.error,c=nt.name,k=M(it)}else g=(await vt(f,d,te,i.shouldUseNativeValidation))[c],y=isNaN(F)||F===h(d,c,F),y&&(g?k=!1:b.isValid&&(k=await X(n,!0)));y&&(f._f.deps&&xe(f._f.deps),Ce(c,k,g,Pe))}},xe=async(s,a={})=>{let c,y;const f=Le(s);if(R(!0),i.resolver){const u=await re(D(s)?s:f);c=M(u),y=s?!f.some(g=>h(u,g)):c}else s?(y=(await Promise.all(f.map(async u=>{const g=h(n,u);return await X(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&p()):y=c=await X(n);return x.state.next({...!K(s)||b.isValid&&c!==t.isValid?{}:{name:s},...i.resolver||!s?{isValid:c}:{},errors:t.errors,isValidating:!1}),a.shouldFocus&&!y&&He(n,u=>u&&h(t.errors,u),s?f:m.mount),y},Je=s=>{const a={...l,...v.mount?d:{}};return D(s)?a:K(s)?h(a,s):s.map(c=>h(a,c))},Qe=(s,a)=>({invalid:!!h((a||t).errors,s),isDirty:!!h((a||t).dirtyFields,s),isTouched:!!h((a||t).touchedFields,s),error:h((a||t).errors,s)}),Lt=s=>{s&&Le(s).forEach(a=>P(t.errors,a)),x.state.next({errors:s?t.errors:{}})},Ye=(s,a,c)=>{const y=(h(n,s,{_f:{}})._f||{}).ref;w(t.errors,s,{...a,ref:y}),x.state.next({name:s,errors:t.errors,isValid:!1}),c&&c.shouldFocus&&y&&y.focus&&y.focus()},Tt=(s,a)=>Q(s)?x.values.subscribe({next:c=>s(V(void 0,a),c)}):V(s,a,!0),Oe=(s,a={})=>{for(const c of s?Le(s):m.mount)m.mount.delete(c),m.array.delete(c),a.keepValue||(P(n,c),P(d,c)),!a.keepError&&P(t.errors,c),!a.keepDirty&&P(t.dirtyFields,c),!a.keepTouched&&P(t.touchedFields,c),!i.shouldUnregister&&!a.keepDefaultValue&&P(l,c);x.values.next({values:{...d}}),x.state.next({...t,...a.keepDirty?{isDirty:_()}:{}}),!a.keepIsValid&&p()},Ee=(s,a={})=>{let c=h(n,s);const y=de(a.disabled);return w(n,s,{...c||{},_f:{...c&&c._f?c._f:{ref:{name:s}},name:s,mount:!0,...a}}),m.mount.add(s),c?y&&w(d,s,a.disabled?void 0:h(d,s,Re(c._f))):se(s,!0,a.value),{...y?{disabled:a.disabled}:{},...i.progressive?{required:!!a.required,min:ve(a.min),max:ve(a.max),minLength:ve(a.minLength),maxLength:ve(a.maxLength),pattern:ve(a.pattern)}:{},name:s,onChange:me,onBlur:me,ref:f=>{if(f){Ee(s,a),c=h(n,s);const u=D(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=ws(u),k=c._f.refs||[];if(g?k.find(F=>F===u):u===c._f.ref)return;w(n,s,{_f:{...c._f,...g?{refs:[...k.filter(Ie),u,...Array.isArray(h(l,s))?[{}]:[]],ref:{type:u.type,name:s}}:{ref:u}}}),se(s,!1,void 0,u)}else c=h(n,s,{}),c._f&&(c._f.mount=!1),(i.shouldUnregister||a.shouldUnregister)&&!(ys(m.array,s)&&v.action)&&m.unMount.add(s)}}},et=()=>i.shouldFocusError&&He(n,s=>s&&h(t.errors,s),m.mount),tt=(s,a)=>async c=>{c&&(c.preventDefault&&c.preventDefault(),c.persist&&c.persist());let y=J(d);if(x.state.next({isSubmitting:!0}),i.resolver){const{errors:f,values:u}=await G();t.errors=f,y=u}else await X(n);P(t.errors,"root"),M(t.errors)?(x.state.next({errors:{}}),await s(y,c)):(a&&await a({...t.errors},c),et(),setTimeout(et)),x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(t.errors),submitCount:t.submitCount+1,errors:t.errors})},It=(s,a={})=>{h(n,s)&&(D(a.defaultValue)?ie(s,h(l,s)):(ie(s,a.defaultValue),w(l,s,a.defaultValue)),a.keepTouched||P(t.touchedFields,s),a.keepDirty||(P(t.dirtyFields,s),t.isDirty=a.defaultValue?_(s,h(l,s)):_()),a.keepError||(P(t.errors,s),b.isValid&&p()),x.state.next({...t}))},st=(s,a={})=>{const c=s||l,y=J(c),f=s&&!M(s)?y:l;if(a.keepDefaultValues||(l=c),!a.keepValues){if(a.keepDirtyValues||U)for(const u of m.mount)h(t.dirtyFields,u)?w(f,u,h(d,u)):ie(u,h(f,u));else{if($e&&D(s))for(const u of m.mount){const g=h(n,u);if(g&&g._f){const k=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(we(k)){const F=k.closest("form");if(F){F.reset();break}}}}n={}}d=e.shouldUnregister?a.keepDefaultValues?J(l):{}:J(f),x.array.next({values:{...f}}),x.values.next({values:{...f}})}m={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&r(),v.mount=!b.isValid||!!a.keepIsValid,v.watch=!!e.shouldUnregister,x.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!Y(s,l)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:a.keepDirtyValues?t.dirtyFields:a.keepDefaultValues&&s?Ue(l,s):{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},rt=(s,a)=>st(Q(s)?s(d):s,a);return{control:{register:Ee,unregister:Oe,getFieldState:Qe,handleSubmit:tt,setError:Ye,_executeSchema:G,_getWatch:V,_getDirty:_,_updateValid:p,_removeUnmounted:S,_updateFieldArray:q,_getFieldArray:I,_reset:st,_resetDefaultValues:()=>Q(i.defaultValues)&&i.defaultValues().then(s=>{rt(s,i.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_subjects:x,_proxyFormState:b,get _fields(){return n},get _formValues(){return d},get _state(){return v},set _state(s){v=s},get _defaultValues(){return l},get _names(){return m},set _names(s){m=s},get _formState(){return t},set _formState(s){t=s},get _options(){return i},set _options(s){i={...i,...s}}},trigger:xe,register:Ee,handleSubmit:tt,watch:Tt,setValue:ie,getValues:Je,reset:rt,resetField:It,clearErrors:Lt,unregister:Oe,setError:Ye,setFocus:(s,a={})=>{const c=h(n,s),y=c&&c._f;if(y){const f=y.refs?y.refs[0]:y.ref;f.focus&&(f.focus(),a.shouldSelect&&f.select())}},getFieldState:Qe}}function Os(e={}){const r=ne.useRef(),[i,t]=ne.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Cs(e,()=>t(l=>({...l}))),formState:i});const n=r.current.control;return n._options=e,vs({subject:n._subjects.state,next:l=>{xs(l,n._proxyFormState,n._updateFormState,!0)&&t({...n._formState})}}),ne.useEffect(()=>{e.values&&(!Y(e.values,n._defaultValues)||!Y(e.values,n._formValues))?n._reset(e.values,n._options.resetOptions):n._resetDefaultValues()},[e.values,n]),ne.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),r.current.formState=ms(i,n),r.current}const Es=()=>o.jsx(We,{children:o.jsx(ss,{href:"https://xn--3kq65av47c4nci1az16mfck.jp/terms-of-use/",children:"利用規約を確認するにはこちらをクリックしてください"})}),Ns=e=>{const[r,i]=E.useState(!1),{handleSubmit:t,register:n,formState:{errors:l,isSubmitting:d}}=Os({defaultValues:{email:e.email,emailOptin:!0},mode:"onChange"}),v=async m=>{try{i(!1);const j={email:m.email,email_optin:m.emailOptin};await is(j,De),window.location.reload()}catch{i(!0)}};return o.jsxs(qe,{spacing:8,children:[o.jsx(z,{as:"h1",children:"「電気通信事業法.jp」ユーザー登録"}),o.jsx("form",{onSubmit:(...m)=>void t(v)(...m),children:o.jsxs(qe,{spacing:4,children:[o.jsx(lt,{children:o.jsxs(ae,{align:"center",children:[o.jsx(rs,{defaultChecked:!0,...n("emailOptin")}),o.jsx(ze,{m:0,children:"当社からのお役立ち情報を受け取る（管理画面からいつでも購読解除できます）"})]})}),o.jsx(lt,{children:o.jsxs(ae,{w:"100%",alignItems:"center",children:[o.jsx(ze,{w:"10rem",m:0,children:"メールアドレス"}),o.jsx(Ge,{w:"100%",type:"email",...n("email",{required:"※メールアドレスを入力してください",pattern:{value:/^[\w\-._]+@[\w\-._]+\.[A-Za-z]+/,message:"※入力形式がメールアドレスではありません。"}})})]})}),l.email!=null&&o.jsxs(ct,{status:"error",children:[o.jsx(ot,{}),o.jsx(L,{children:l.email.message})]}),r&&o.jsxs(ct,{status:"error",children:[o.jsx(ot,{}),o.jsx(L,{children:"このメールアドレスはすでに使用されています。他のメールアドレスをご利用ください。"})]}),o.jsx(Es,{}),l.email==null&&o.jsx(pe,{colorScheme:"blue",isLoading:d,isDisabled:!1,type:"submit",children:"利用規約に同意して登録する"}),l.email!=null&&o.jsx(pe,{colorScheme:"blue",isLoading:d,isDisabled:!0,type:"submit",children:"利用規約に同意して登録する"})]})})]})},Ps=e=>{const[r,i]=E.useState(e.emailOptin),t=n=>{i(n.target.checked),ns({email_optin:n.target.checked},De).catch(l=>{console.log(l)})};return o.jsxs(ee,{spacing:4,children:[o.jsx(z,{as:"h3",size:"lg",children:"メール配信設定"}),o.jsxs(ae,{children:[o.jsx(At,{onChange:t,isChecked:r}),o.jsx(L,{children:"当社からのお役立ち情報を受け取る"})]})]})};function Ls(e){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(e)}function Ts(e){return bt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 75.2v361.7c0 24.3-19 43.2-43.2 43.2H43.2C19.3 480 0 461.4 0 436.8V75.2C0 51.1 18.8 32 43.2 32h361.7c24 0 43.1 18.8 43.1 43.2zm-37.3 361.6V75.2c0-3-2.6-5.8-5.8-5.8h-9.3L285.3 144 224 94.1 162.8 144 52.5 69.3h-9.3c-3.2 0-5.8 2.8-5.8 5.8v361.7c0 3 2.6 5.8 5.8 5.8h361.7c3.2.1 5.8-2.7 5.8-5.8zM150.2 186v37H76.7v-37h73.5zm0 74.4v37.3H76.7v-37.3h73.5zm11.1-147.3l54-43.7H96.8l64.5 43.7zm210 72.9v37h-196v-37h196zm0 74.4v37.3h-196v-37.3h196zm-84.6-147.3l64.5-43.7H232.8l53.9 43.7zM371.3 335v37.3h-99.4V335h99.4z"}}]})(e)}const Is=()=>o.jsxs(ee,{spacing:4,children:[o.jsx(z,{as:"h3",size:"lg",children:"使い方"}),o.jsx(z,{as:"h4",size:"md",children:"1. 利用しているサービスにチェックを入れる"}),o.jsx(L,{children:"お使いのサービスにチェックを入れましょう！"}),o.jsx(z,{as:"h4",size:"md",children:"2. プライバシーポリシーなどのページにショートコードを挿入する"}),o.jsx(L,{children:"利用中のサービスを表示したいページに[電気通信事業法]というショートコードを挿入してください。"}),o.jsx(L,{children:"そのショートコード上に「1. 利用しているサービスにチェックを入れる」で選択したサービスが表示されます。"}),o.jsx(z,{as:"h4",size:"md",children:"3. これで完了です！もし気に入った場合はTwitterなどでの拡散をお願いします！"}),o.jsx(L,{children:"改正電気通信事業法は2023年6月16日に施行されたので、未対応サイトが依然として多いです。"}),o.jsx(L,{children:"加えて、このプラグインは無料なので、サービスが維持できるかどうかは、あなたの拡散に懸かっています。"}),o.jsx(L,{children:"ぜひこちらのボタン（ツイート画面が立ち上がります）をクリックして、拡散にご協力いただけましたら幸いです。"}),o.jsx(pe,{colorScheme:"blue",w:"24vw",as:"a",target:"_blank",textDecoration:"none",_hover:{color:"gray.400",textDecoration:"none"},href:"https://twitter.com/intent/tweet?text=無料のWordPressプラグイン「https://改正電気通信事業法.jp」を使って、3分で改正電気通信事業法に対応完了しました！&hashtags=改正電気通信事業法",children:o.jsxs(ae,{children:[o.jsx(Ls,{}),o.jsx(L,{children:"ツイートして拡散に協力する"})]})}),o.jsx(z,{as:"h4",size:"md",children:"4. 対応リストにサービスの追加を依頼する"}),o.jsx(L,{children:"対応リストに追加して欲しいサービスがございましたら、こちらのフォームよりお問い合わせください。"}),o.jsx(pe,{colorScheme:"purple",w:"24vw",as:"a",target:"_blank",textDecoration:"none",_hover:{color:"gray.400",textDecoration:"none"},href:"https://forms.gle/1ngSSaUidogXWGmDA",children:o.jsxs(ae,{children:[o.jsx(Ts,{}),o.jsx(L,{children:"サービスの追加を依頼する"})]})})]}),Gs=()=>{const[e,r]=E.useState(!0),[i,t]=E.useState(!1),[n,l]=E.useState(!1),[d,v]=E.useState(""),[m,j]=E.useState([]),[C,b]=E.useState(!0);return E.useEffect(()=>{as(De).then(x=>{t(!1),l(x.data.is_new_user),v(x.data.current_user_email),r(!1),j(x.data.service_official_policies_uids),b(x.data.email_optin)}).catch(()=>{t(!0),r(!1)})},[]),o.jsxs(We,{w:"87vw",bgColor:"white",p:8,minH:"100vh",children:[e&&o.jsx(ls,{w:"100%",justify:"center",children:o.jsx(wt,{})}),!e&&i&&o.jsx(ds,{}),!e&&!i&&n&&o.jsx(Ns,{email:d}),!e&&!i&&!n&&o.jsxs(ee,{spacing:8,children:[o.jsx(Is,{}),o.jsx(us,{selectedServiceOfficialPoliciesUids:m,setSelectedServiceOfficialPoliciesUids:j}),o.jsx(Ps,{emailOptin:C})]})]})};export{Gs as default};
